{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thech\\\\Documents\\\\Summer 2022\\\\Headstart\\\\GroupCollab\\\\client\\\\src\\\\component\\\\Videochat.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useRef, useState } from \"react\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/firestore\";\nimport { ReactComponent as HangupIcon } from \"./icons/hangup.svg\";\nimport { ReactComponent as MoreIcon } from \"./icons/more-vertical.svg\";\nimport { ReactComponent as CopyIcon } from \"./icons/copy.svg\"; // Initialize Firebase\n\nimport { firestore } from \"../backend/firebase\"; // Initialize WebRTC\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst servers = {\n  iceServers: [{\n    urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"]\n  }],\n  iceCandidatePoolSize: 10\n};\nconst pc = new RTCPeerConnection(servers);\n\nfunction Videochat() {\n  _s();\n\n  const [currentPage, setCurrentPage] = useState(\"home\");\n  const [joinCode, setJoinCode] = useState(\"\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [\"aaa aa\", currentPage === \"home\" ? /*#__PURE__*/_jsxDEV(Menu, {\n      joinCode: joinCode,\n      setJoinCode: setJoinCode,\n      setPage: setCurrentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Videos, {\n      mode: currentPage,\n      callId: joinCode,\n      setPage: setCurrentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Videochat, \"IW+AHA0YXjXbTIexrqUDCSkt3LE=\");\n\n_c = Videochat;\n\nfunction Menu(_ref) {\n  let {\n    joinCode,\n    setJoinCode,\n    setPage\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create box\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setPage(\"create\"),\n        children: \"Create Call\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"answer box\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: joinCode,\n        onChange: e => setJoinCode(e.target.value),\n        placeholder: \"Join with code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setPage(\"join\"),\n        children: \"Answer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = Menu;\n\nfunction Videos(_ref2) {\n  _s2();\n\n  let {\n    mode,\n    callId,\n    setPage\n  } = _ref2;\n  const [webcamActive, setWebcamActive] = useState(false);\n  const [roomId, setRoomId] = useState(callId);\n  const localRef = useRef();\n  const remoteRef = useRef();\n\n  const setupSources = async () => {\n    const localStream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    });\n    const remoteStream = new MediaStream();\n    localStream.getTracks().forEach(track => {\n      pc.addTrack(track, localStream);\n    });\n\n    pc.ontrack = event => {\n      event.streams[0].getTracks().forEach(track => {\n        remoteStream.addTrack(track);\n      });\n    };\n\n    localRef.current.srcObject = localStream;\n    remoteRef.current.srcObject = remoteStream;\n    setWebcamActive(true);\n\n    if (mode === \"create\") {\n      const callDoc = firestore.collection(\"calls\").doc();\n      const offerCandidates = callDoc.collection(\"offerCandidates\");\n      const answerCandidates = callDoc.collection(\"answerCandidates\");\n      setRoomId(callDoc.id);\n\n      pc.onicecandidate = event => {\n        event.candidate && offerCandidates.add(event.candidate.toJSON());\n      };\n\n      const offerDescription = await pc.createOffer();\n      await pc.setLocalDescription(offerDescription);\n      const offer = {\n        sdp: offerDescription.sdp,\n        type: offerDescription.type\n      };\n      await callDoc.set({\n        offer\n      });\n      callDoc.onSnapshot(snapshot => {\n        const data = snapshot.data();\n\n        if (!pc.currentRemoteDescription && data !== null && data !== void 0 && data.answer) {\n          const answerDescription = new RTCSessionDescription(data.answer);\n          pc.setRemoteDescription(answerDescription);\n        }\n      });\n      answerCandidates.onSnapshot(snapshot => {\n        snapshot.docChanges().forEach(change => {\n          if (change.type === \"added\") {\n            const candidate = new RTCIceCandidate(change.doc.data());\n            pc.addIceCandidate(candidate);\n          }\n        });\n      });\n    } else if (mode === \"join\") {\n      const callDoc = firestore.collection(\"calls\").doc(callId);\n      const answerCandidates = callDoc.collection(\"answerCandidates\");\n      const offerCandidates = callDoc.collection(\"offerCandidates\");\n\n      pc.onicecandidate = event => {\n        event.candidate && answerCandidates.add(event.candidate.toJSON());\n      };\n\n      const callData = (await callDoc.get()).data();\n      const offerDescription = callData.offer;\n      await pc.setRemoteDescription(new RTCSessionDescription(offerDescription));\n      const answerDescription = await pc.createAnswer();\n      await pc.setLocalDescription(answerDescription);\n      const answer = {\n        type: answerDescription.type,\n        sdp: answerDescription.sdp\n      };\n      await callDoc.update({\n        answer\n      });\n      offerCandidates.onSnapshot(snapshot => {\n        snapshot.docChanges().forEach(change => {\n          if (change.type === \"added\") {\n            let data = change.doc.data();\n            pc.addIceCandidate(new RTCIceCandidate(data));\n          }\n        });\n      });\n    }\n\n    pc.onconnectionstatechange = event => {\n      if (pc.connectionState === \"disconnected\") {\n        hangUp();\n      }\n    };\n  };\n\n  const hangUp = async () => {\n    pc.close();\n\n    if (roomId) {\n      let roomRef = firestore.collection(\"calls\").doc(roomId);\n      await roomRef.collection(\"answerCandidates\").get().then(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          doc.ref.delete();\n        });\n      });\n      await roomRef.collection(\"offerCandidates\").get().then(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          doc.ref.delete();\n        });\n      });\n      await roomRef.delete();\n    }\n\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"videos\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: localRef,\n      autoPlay: true,\n      playsInline: true,\n      className: \"local\",\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: remoteRef,\n      autoPlay: true,\n      playsInline: true,\n      className: \"remote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buttonsContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: hangUp,\n        disabled: !webcamActive,\n        className: \"hangup button\",\n        children: /*#__PURE__*/_jsxDEV(HangupIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        tabIndex: 0,\n        role: \"button\",\n        className: \"more button\",\n        children: [roomId, /*#__PURE__*/_jsxDEV(MoreIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popover\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              navigator.clipboard.writeText(roomId);\n            },\n            children: [/*#__PURE__*/_jsxDEV(CopyIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), \" Copy joining code\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), !webcamActive && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modalContainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Turn on your camera and microphone and start the call\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPage(\"home\"),\n            className: \"secondary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: setupSources,\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Videos, \"Ie/qGXpq8E8VsIynTPqhiYB51aw=\");\n\n_c3 = Videos;\nexport default Videochat;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Videochat\");\n$RefreshReg$(_c2, \"Menu\");\n$RefreshReg$(_c3, \"Videos\");","map":{"version":3,"names":["useRef","useState","firebase","ReactComponent","HangupIcon","MoreIcon","CopyIcon","firestore","servers","iceServers","urls","iceCandidatePoolSize","pc","RTCPeerConnection","Videochat","currentPage","setCurrentPage","joinCode","setJoinCode","Menu","setPage","e","target","value","Videos","mode","callId","webcamActive","setWebcamActive","roomId","setRoomId","localRef","remoteRef","setupSources","localStream","navigator","mediaDevices","getUserMedia","video","audio","remoteStream","MediaStream","getTracks","forEach","track","addTrack","ontrack","event","streams","current","srcObject","callDoc","collection","doc","offerCandidates","answerCandidates","id","onicecandidate","candidate","add","toJSON","offerDescription","createOffer","setLocalDescription","offer","sdp","type","set","onSnapshot","snapshot","data","currentRemoteDescription","answer","answerDescription","RTCSessionDescription","setRemoteDescription","docChanges","change","RTCIceCandidate","addIceCandidate","callData","get","createAnswer","update","onconnectionstatechange","connectionState","hangUp","close","roomRef","then","querySnapshot","ref","delete","window","location","reload","clipboard","writeText"],"sources":["C:/Users/thech/Documents/Summer 2022/Headstart/GroupCollab/client/src/component/Videochat.jsx"],"sourcesContent":["import { useRef, useState } from \"react\";\r\n\r\nimport firebase from \"firebase/compat/app\";\r\nimport \"firebase/compat/firestore\";\r\n\r\nimport { ReactComponent as HangupIcon } from \"./icons/hangup.svg\";\r\nimport { ReactComponent as MoreIcon } from \"./icons/more-vertical.svg\";\r\nimport { ReactComponent as CopyIcon } from \"./icons/copy.svg\";\r\n\r\n// Initialize Firebase\r\n\r\nimport { firestore } from \"../backend/firebase\";\r\n\r\n// Initialize WebRTC\r\nconst servers = {\r\n  iceServers: [\r\n    {\r\n      urls: [\"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\"],\r\n    },\r\n  ],\r\n  iceCandidatePoolSize: 10,\r\n};\r\n\r\nconst pc = new RTCPeerConnection(servers);\r\n\r\nfunction Videochat() {\r\n  const [currentPage, setCurrentPage] = useState(\"home\");\r\n  const [joinCode, setJoinCode] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      aaa aa\r\n      {currentPage === \"home\" ? (\r\n        <Menu\r\n          joinCode={joinCode}\r\n          setJoinCode={setJoinCode}\r\n          setPage={setCurrentPage}\r\n        />\r\n      ) : (\r\n        <Videos mode={currentPage} callId={joinCode} setPage={setCurrentPage} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Menu({ joinCode, setJoinCode, setPage }) {\r\n  return (\r\n    <div className=\"home\">\r\n      <div className=\"create box\">\r\n        <button onClick={() => setPage(\"create\")}>Create Call</button>\r\n      </div>\r\n\r\n      <div className=\"answer box\">\r\n        <input\r\n          value={joinCode}\r\n          onChange={(e) => setJoinCode(e.target.value)}\r\n          placeholder=\"Join with code\"\r\n        />\r\n        <button onClick={() => setPage(\"join\")}>Answer</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Videos({ mode, callId, setPage }) {\r\n  const [webcamActive, setWebcamActive] = useState(false);\r\n  const [roomId, setRoomId] = useState(callId);\r\n\r\n  const localRef = useRef();\r\n  const remoteRef = useRef();\r\n\r\n  const setupSources = async () => {\r\n    const localStream = await navigator.mediaDevices.getUserMedia({\r\n      video: true,\r\n      audio: true,\r\n    });\r\n    const remoteStream = new MediaStream();\r\n\r\n    localStream.getTracks().forEach((track) => {\r\n      pc.addTrack(track, localStream);\r\n    });\r\n\r\n    pc.ontrack = (event) => {\r\n      event.streams[0].getTracks().forEach((track) => {\r\n        remoteStream.addTrack(track);\r\n      });\r\n    };\r\n\r\n    localRef.current.srcObject = localStream;\r\n    remoteRef.current.srcObject = remoteStream;\r\n\r\n    setWebcamActive(true);\r\n\r\n    if (mode === \"create\") {\r\n      const callDoc = firestore.collection(\"calls\").doc();\r\n      const offerCandidates = callDoc.collection(\"offerCandidates\");\r\n      const answerCandidates = callDoc.collection(\"answerCandidates\");\r\n\r\n      setRoomId(callDoc.id);\r\n\r\n      pc.onicecandidate = (event) => {\r\n        event.candidate && offerCandidates.add(event.candidate.toJSON());\r\n      };\r\n\r\n      const offerDescription = await pc.createOffer();\r\n      await pc.setLocalDescription(offerDescription);\r\n\r\n      const offer = {\r\n        sdp: offerDescription.sdp,\r\n        type: offerDescription.type,\r\n      };\r\n\r\n      await callDoc.set({ offer });\r\n\r\n      callDoc.onSnapshot((snapshot) => {\r\n        const data = snapshot.data();\r\n        if (!pc.currentRemoteDescription && data?.answer) {\r\n          const answerDescription = new RTCSessionDescription(data.answer);\r\n          pc.setRemoteDescription(answerDescription);\r\n        }\r\n      });\r\n\r\n      answerCandidates.onSnapshot((snapshot) => {\r\n        snapshot.docChanges().forEach((change) => {\r\n          if (change.type === \"added\") {\r\n            const candidate = new RTCIceCandidate(change.doc.data());\r\n            pc.addIceCandidate(candidate);\r\n          }\r\n        });\r\n      });\r\n    } else if (mode === \"join\") {\r\n      const callDoc = firestore.collection(\"calls\").doc(callId);\r\n      const answerCandidates = callDoc.collection(\"answerCandidates\");\r\n      const offerCandidates = callDoc.collection(\"offerCandidates\");\r\n\r\n      pc.onicecandidate = (event) => {\r\n        event.candidate && answerCandidates.add(event.candidate.toJSON());\r\n      };\r\n\r\n      const callData = (await callDoc.get()).data();\r\n\r\n      const offerDescription = callData.offer;\r\n      await pc.setRemoteDescription(\r\n        new RTCSessionDescription(offerDescription)\r\n      );\r\n\r\n      const answerDescription = await pc.createAnswer();\r\n      await pc.setLocalDescription(answerDescription);\r\n\r\n      const answer = {\r\n        type: answerDescription.type,\r\n        sdp: answerDescription.sdp,\r\n      };\r\n\r\n      await callDoc.update({ answer });\r\n\r\n      offerCandidates.onSnapshot((snapshot) => {\r\n        snapshot.docChanges().forEach((change) => {\r\n          if (change.type === \"added\") {\r\n            let data = change.doc.data();\r\n            pc.addIceCandidate(new RTCIceCandidate(data));\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    pc.onconnectionstatechange = (event) => {\r\n      if (pc.connectionState === \"disconnected\") {\r\n        hangUp();\r\n      }\r\n    };\r\n  };\r\n\r\n  const hangUp = async () => {\r\n    pc.close();\r\n\r\n    if (roomId) {\r\n      let roomRef = firestore.collection(\"calls\").doc(roomId);\r\n      await roomRef\r\n        .collection(\"answerCandidates\")\r\n        .get()\r\n        .then((querySnapshot) => {\r\n          querySnapshot.forEach((doc) => {\r\n            doc.ref.delete();\r\n          });\r\n        });\r\n      await roomRef\r\n        .collection(\"offerCandidates\")\r\n        .get()\r\n        .then((querySnapshot) => {\r\n          querySnapshot.forEach((doc) => {\r\n            doc.ref.delete();\r\n          });\r\n        });\r\n\r\n      await roomRef.delete();\r\n    }\r\n\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <div className=\"videos\">\r\n      <video ref={localRef} autoPlay playsInline className=\"local\" muted />\r\n      <video ref={remoteRef} autoPlay playsInline className=\"remote\" />\r\n\r\n      <div className=\"buttonsContainer\">\r\n        <button\r\n          onClick={hangUp}\r\n          disabled={!webcamActive}\r\n          className=\"hangup button\"\r\n        >\r\n          <HangupIcon />\r\n        </button>\r\n        <div tabIndex={0} role=\"button\" className=\"more button\">\r\n          {roomId}\r\n          <MoreIcon />\r\n          <div className=\"popover\">\r\n            <button\r\n              onClick={() => {\r\n                navigator.clipboard.writeText(roomId);\r\n              }}\r\n            >\r\n              <CopyIcon /> Copy joining code\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {!webcamActive && (\r\n        <div className=\"modalContainer\">\r\n          <div className=\"modal\">\r\n            <h3>Turn on your camera and microphone and start the call</h3>\r\n            <div className=\"container\">\r\n              <button onClick={() => setPage(\"home\")} className=\"secondary\">\r\n                Cancel\r\n              </button>\r\n              <button onClick={setupSources}>Start</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Videochat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}